(()=>{"use strict";function e(e,n,t){return i=this,o=void 0,c=function*(){document.querySelector("#weatherReading").innerHTML='\n    <img src="https://cutewallpaper.org/21/loading-gif-transparent-background/2-Methods-to-Recover-an-Unsaved-PowerPoint-File.gif">\n  ';const i=`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${n}&APPID=ca6124368763b6357e43c99bc81a7779&lang=${t}`;try{let e=()=>"metric"==n?"ºC":"imperial"==n?"ºK":"fahrenheit"==n?"ºF":void 0;const t=yield fetch(i,{mode:"cors"}),o=yield t.json(),r=new Date(o.dt);console.log("response as json",o);let c={desc:o.weather[0].description,hour:r.getHours(),maxTemp:o.main.temp_max+e(),minTemp:o.main.temp_min+e(),tempSens:o.main.feels_like+e(),humidity:o.main.humidity+"%"};return console.log("pre-export object",c),c}catch(e){console.log("ERROR:",e)}},new((r=void 0)||(r=Promise))((function(e,n){function t(e){try{u(c.next(e))}catch(e){n(e)}}function a(e){try{u(c.throw(e))}catch(e){n(e)}}function u(n){var i;n.done?e(n.value):(i=n.value,i instanceof r?i:new r((function(e){e(i)}))).then(t,a)}u((c=c.apply(i,o||[])).next())}));var i,o,r,c}let n,t,i;function o(){const e=document.querySelector("#weatherForm"),n=document.querySelector("#weatherFormDiv");e&&e.remove(),n.innerHTML='\n        <div id="weatherFormDiv">\n          <button id="spawnForm">Check the weather somewhere</button>\n        </div>\n        ',r()}function r(){const r=document.querySelector("#weatherFormDiv");document.querySelector("#spawnForm").addEventListener("click",(()=>{r.innerHTML='\n      <form id="weatherForm" onsubmit="return false">\n        <input id="cityNameForm" type="text" name="city" placeholder="City">\n        <select id="unitsForm">\n          <option value="metric"> Metric (ºC) </option>\n          <option value="fahrenheit"> Fahrenheit (ºF) </option>\n          <option value="imperial"> Imperial (ºK) </option>\n        </select>\n        <button id="submitForm">Submit</button>\n      </form>\n      ',function(){const r=document.querySelector("#cityNameForm"),a=document.querySelector("#unitsForm");document.querySelector("#submitForm").onclick=()=>{if(/\w{2,20}/.test(r.value)&&/[Metric]|[Imperial]|[Fahrenheit]/.test(a.value)){n=r.value,t=a.value;let u=e(n,t,i);setTimeout((()=>{c(u)}),500),o()}else alert("Bad input")}}()}))}function c(e){return t=this,i=void 0,r=function*(){let t,i=(yield e).desc,o={Max:(yield e).maxTemp,min:(yield e).minTemp,tempSen:(yield e).tempSens,humid:(yield e).humidity},r=(yield e).hour;i.includes("rain")?t="../src/icons/rain.png":i.includes("clouds")?t=r>20?"../src/icons/cloudy-night.png":"../src/icons/cloudy-day.png":i.includes("snow")?t="../src/icons/snow.png":i.includes("thunder")?t=r>20?"../src/icons/night-thunderstorm.png":"../src/icons/day-thunderstorm.png":i.includes("clear")?t=r>20?"../src/icons/clear-night.png":"../src/icons/clear-day.png":i.includes("eclipse")?t="../src/icons/eclipse.png":i.includes("falling stars")&&(t="../src/icons/falling-star.png"),document.querySelector("#weatherReading").innerHTML='\n        <div id="currentWeatherDiv"></div>\n        <img id="weatherIcon" src="" />\n        <div id="currentWeatherValues"></div>\n    ';const c=document.querySelector("#weatherIcon"),a=document.querySelector("#currentWeatherDiv"),u=document.querySelector("#currentWeatherValues");null!=a&&null!=c&&null!=u&&(a.innerHTML=`\n    <h3 id="currentCity"> ${n} </h3>\n    <h3 id="currentWeatherDesc"> ${i} </h3>\n    `,c.src=t,console.log(o),u.innerHTML=`\n      <p>Max. Temperature: ${o.Max} </p>\n      <p>min. Temperature: ${o.min} </p>\n      <p>Thermic sensation: ${o.tempSen}</p>\n      <p>Humidity: ${o.humid}</p>\n    `),console.log("returned object",yield e)},new((o=void 0)||(o=Promise))((function(e,n){function c(e){try{u(r.next(e))}catch(e){n(e)}}function a(e){try{u(r.throw(e))}catch(e){n(e)}}function u(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,a)}u((r=r.apply(t,i||[])).next())}));var t,i,o,r}window.onload=()=>{!function(){let o=Math.floor(10*Math.random());t="metric",i="en",1==o||0==o?n="Barcelona":2==o||3==o?n="Baghdad":4==o||5==o?n="Cuenca":6==o||7==o?n="Milwaukee":o>7&&(n="Tokyo"),console.log("random: ",o,n);let r=e(n,t,i);setTimeout((()=>{c(r)}),500)}(),o(),r()},i="en"})();