(()=>{"use strict";function e(e,n,t){return r=this,i=void 0,c=function*(){document.querySelector("#weatherReading").innerHTML='\n    <img src="https://cutewallpaper.org/21/loading-gif-transparent-background/2-Methods-to-Recover-an-Unsaved-PowerPoint-File.gif">\n  ';const r=`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${n}&APPID=ca6124368763b6357e43c99bc81a7779&lang=${t}`;try{let e=()=>"metric"==n?"ºC":"imperial"==n?"ºK":"fahrenheit"==n?"ºF":void 0;const t=yield fetch(r,{mode:"cors"}),i=yield t.json(),o=new Date(i.dt);return{desc:i.weather[0].description,hour:o.getHours(),maxTemp:i.main.temp_max+e(),minTemp:i.main.temp_min+e(),tempSens:i.main.feels_like+e(),humidity:i.main.humidity+"%"}}catch(e){alert("Sorry, there has been an error, for more info, check the console"),console.log("ERROR:",e)}},new((o=void 0)||(o=Promise))((function(e,n){function t(e){try{u(c.next(e))}catch(e){n(e)}}function a(e){try{u(c.throw(e))}catch(e){n(e)}}function u(n){var r;n.done?e(n.value):(r=n.value,r instanceof o?r:new o((function(e){e(r)}))).then(t,a)}u((c=c.apply(r,i||[])).next())}));var r,i,o,c}let n,t;window.onload=()=>{!function(){let i=Math.floor(10*Math.random());t="metric",r="en",1==i||0==i?n="Barcelona":2==i||3==i?n="Baghdad":4==i||5==i?n="Cuenca":6==i||7==i?n="Milwaukee":i>7&&(n="Tokyo");let o=e(n,t,r);setTimeout((()=>{c(o)}),500)}(),i(),o()};let r="en";function i(){const e=document.querySelector("#weatherForm"),n=document.querySelector("#weatherFormDiv");e&&e.remove(),n.innerHTML='\n        <div id="weatherFormDiv">\n          <button id="spawnForm">Check the weather somewhere</button>\n        </div>\n        ',o()}function o(){const o=document.querySelector("#weatherFormDiv");document.querySelector("#spawnForm").addEventListener("click",(()=>{o.innerHTML='\n      <form id="weatherForm" onsubmit="return false">\n        <input id="cityNameForm" type="text" name="city" placeholder="City">\n        <select id="unitsForm">\n          <option value="metric"> Metric (ºC) </option>\n          <option value="fahrenheit"> Fahrenheit (ºF) </option>\n          <option value="imperial"> Imperial (ºK) </option>\n        </select>\n        <button id="submitForm">Submit</button>\n      </form>\n      ',function(){const o=document.querySelector("#cityNameForm"),a=document.querySelector("#unitsForm");document.querySelector("#submitForm").onclick=()=>{if(/\w{2,20}/.test(o.value)&&/[Metric]|[Imperial]|[Fahrenheit]/.test(a.value)){n=o.value,t=a.value;let u=e(n,t,r);setTimeout((()=>{c(u)}),500),i()}else alert("Bad input")}}()}))}function c(e){return t=this,r=void 0,o=function*(){let t,r=(yield e).desc,i=(yield e).maxTemp,o=(yield e).minTemp,c=(yield e).tempSens,a=(yield e).humidity,u=(yield e).hour;r.includes("rain")?t="../src/icons/rain.png":r.includes("clouds")?t=u>20?"../src/icons/cloudy-night.png":"../src/icons/cloudy-day.png":r.includes("snow")?t="../src/icons/snow.png":r.includes("thunder")?t=u>20?"../src/icons/night-thunderstorm.png":"../src/icons/day-thunderstorm.png":r.includes("clear")?t=u>20?"../src/icons/clear-night.png":"../src/icons/clear-day.png":r.includes("eclipse")?t="../src/icons/eclipse.png":r.includes("falling stars")&&(t="../src/icons/falling-star.png"),document.querySelector("#weatherReading").innerHTML='\n        <div id="currentWeatherDiv"></div>\n        <img id="weatherIcon" src="" />\n        <div id="currentWeatherValues"></div>\n    ';const l=document.querySelector("#weatherIcon"),s=document.querySelector("#currentWeatherDiv"),d=document.querySelector("#currentWeatherValues");null!=s&&null!=l&&null!=d&&(s.innerHTML=`\n    <h3 id="currentCity"> ${n} </h3>\n    <h3 id="currentWeatherDesc"> ${r} </h3>\n    `,l.src=t,d.innerHTML=`\n      <p>Max. Temperature: ${i} </p>\n      <p>min. Temperature: ${o} </p>\n      <p>Thermic sensation: ${c}</p>\n      <p>Humidity: ${a}</p>\n    `)},new((i=void 0)||(i=Promise))((function(e,n){function c(e){try{u(o.next(e))}catch(e){n(e)}}function a(e){try{u(o.throw(e))}catch(e){n(e)}}function u(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}u((o=o.apply(t,r||[])).next())}));var t,r,i,o}})();